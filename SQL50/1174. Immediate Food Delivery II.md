
Solution:

```
SELECT 
    ROUND(COUNT(IF(order_date = customer_pref_delivery_date, 1, NULL)) / COUNT(*) * 100, 2) as immediate_percentage
FROM Delivery
WHERE (customer_id, order_date) IN (
    SELECT customer_id, MIN(order_date)
    FROM Delivery
    GROUP BY customer_id
)
```

It seems `COUNT(IF(...), 1, NULL)` equals `SUM(IF(...), 1, 0)`